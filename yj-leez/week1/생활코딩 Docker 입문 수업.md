# 생활코딩 Docker 입문 수업

### Docker란

![스크린샷 2023-08-17 오전 1.56.53.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_1.56.53.png)

Docker : 하나의 운영체제 위에 각각의 앱을 실행시키되, 격리된 환경에서 실행시킬 수 있게 하는 소프트웨어

- host : 운영체제가 설치된 컴퓨터
- container : 하나의 운영 체제 안에서 커널을 공유하며 개별적인 실행 환경을 제공하는 격리된 공간으로써, host에서 실행되는 격리된 각각의 실행 환경. 앱을 실행시키는데 필요한 라이브러리와 실행 파일들만 존재

### Docker 설치

- Docker는 linux OS에서 실행되기 때문에 맥이나 윈도우 사용시 가상머신에 linux OS를 깔고 그 안에서 도커와 같은 컨테이너 기술 활용 가능
- 설치: Docker 홈페이지 > Developers > Docs > Download and Install 에서 설치 가능

![스크린샷 2023-08-17 오후 3.05.26.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.05.26.png)

![스크린샷 2023-08-17 오후 3.06.00.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.06.00.png)

→ docker images 를 터미널에 입력했을 때 에러가 뜨지 않으면 설치 성공

### Image pull

![스크린샷 2023-08-17 오후 3.08.34.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.08.34.png)

- docker hub: 도커 홈페이지 내 도커 허브에서 다양한 이미지를 배포. app store와 같은 개념
- image: 서비스 운영에 필요한 파일과 설정값 등을 포함하고 있는 것을 의미. program과 같은 개념
- container: 개별 프로그램을 실행하는 데 필요한 환경을 설정해주는 기술. process와 같은 개념
→ image를 실행한 것이 container이며 image는 여러 개의 container를 가질 수 있음

![스크린샷 2023-08-17 오후 3.15.27.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.15.27.png)

  → docker hub에서 원하는 소프트웨어가 설치되어 있는 컨테이너를 찾을 수 있음

![스크린샷 2023-08-17 오후 3.16.59.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.16.59.png)

- `docker pull [OPTIONS] NAME[:TAG|@DIGEST]` : 이미지 pull 명령어

![스크린샷 2023-08-17 오후 3.21.37.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.21.37.png)

  → 원하는 컨테이너를 찾으면 해당 명령어로 설치할 수 있음을 알려줌, pull 완료

### container run

- `docker run [OPTIONS] IMAGE [COMMAND]` : 컨테이너 create + run
ex) `docker run —name ws1 httpd`
- `docker ps` : docker 실행상태 확인
- `docker stop CONTAINER` : 컨테이너 stop
- `docker restart CONTAINER` : 컨테이너 재시작
- `docker [OPTIONS] rm CONTAINER` : 컨테이너 삭제, 실행중인 컨테이너 삭제 불가
- `docker logs [OPTIONS]` : 로그 확인
- `docker rmi IMAGE` : 이미지 삭제

### network

![스크린샷 2023-08-17 오후 3.53.01.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.53.01.png)

- `docker run -p 80:80 httpd`: host에는 여러 개의 container가 존재하므로 port forwarding을 통해 host의 port와 container의 port를 연결해주어야함

### 명령어 실행

- `docker exec [OPTIONS] CONTAINER COMMAND [ARG..]` : 컨테이너 내부에서 해당 명령어 실행
- `docker exec -it CONTAINER /bin/sh` : 컨테이너 내부에서 지속적으로 명령어 실행 가능, `exit` 로 종료

### host와 container의 파일 시스템 연결

![스크린샷 2023-08-17 오후 4.16.00.png](%E1%84%89%E1%85%A2%E1%86%BC%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC%20Docker%20%E1%84%8B%E1%85%B5%E1%86%B8%E1%84%86%E1%85%AE%E1%86%AB%20%E1%84%89%E1%85%AE%E1%84%8B%E1%85%A5%E1%86%B8%20ae8be56eb1514d749aa7fab493b35751/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.16.00.png)

위 명령어로 컨테이너 파일을 직접 수정하면 컨테이너가 삭제되는 등의 위험이 존재함

→ host와 container의 파일 시스템을 연결하여 host에서 수정이 이루어졌을 때 container에 반영되도록 하는 것을 추천. 즉, 실행환경은 컨테이너에게 맡기고 파일 수정은 host가!

- `docker run -p 8888:80 -v ~/Desktop/htdocs:/user/local/apache2/htdocs/ httpd` : 
host의 ~/Desktop/htdocs 디렉토리와 컨테이너 안에서 웹페이지를 찾도록 약속되어 있는 /user/local/apache2/htdocs 디렉토리 연결